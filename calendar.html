<html>
  <head>
    <title>Gregorian to Sajem Tan Calendar Converter</title>
  </head>
  <body>
    <h3>Date</h3>
      <span>Date: </span>
      <input type="date" id="calcday"></input>
      <span> Time (UTC): </span>
      <input type="time" id="calctime"></input>
      <br>
      <button onclick="setcalc('now');">Now</button>
    <h3>Result</h3>
      <p><b>Year:</b> <span id="year"></span></p>
      <p><b>Month:</b> <span id="month"></span> <b>Day:</b> <span id="monthday"></span></p>
      <p><b>Cycle:</b> <span id="cycle"></span> <b>Day:</b> <span id="cycleday"></span></p>
      <p><b>Hour:</b> <span id="hour"></span> <b>Minute:</b> <span id="minute"></span> <b>Millisecond:</b> <span id="millisecond"></span></p>
      <button onclick="makedate();">Show Date</button>
    <script>
      var countfrom = new Date("29 Nov 2015 18:34:14 -0500");
      var timediff = function(datestring) {
        var calc = new Date(datestring);
        return calc.getTime() - countfrom.getTime();
      };
      var splitdiff = function(milliseconds) {
        var ret = {};
        
        var minutesfactor = Math.pow(6,6) * 4;
        ret['millisecond'] = milliseconds % minutesfactor;
        var minutes = (milliseconds - (milliseconds % minutesfactor)) / minutesfactor;
        
        var hoursfactor = 36;
        ret['minute'] = minutes % hoursfactor;
        var hours = (minutes - (minutes % hoursfactor)) / hoursfactor;
        
        var daysfactor = 10;
        ret['hour'] = hours % daysfactor;
        var days = (hours - (hours % daysfactor)) / daysfactor;
        
        var yearsfactor = 360;
        var mdays = days % yearsfactor;
        ret['year'] = (days - mdays) / yearsfactor;
        
        var cyclesfactor = 30;
        ret['cycleday'] = mdays % cyclesfactor;
        ret['cycle'] = (mdays - (mdays % cyclesfactor)) / cyclesfactor;
        
        var monthsfactor = 40;
        ret['monthday'] = mdays % monthsfactor;
        ret['month'] = (mdays - (mdays % monthsfactor)) / monthsfactor;
        
        return ret;
      };
      var setcalc = function(when) {
        if (when == 'now') {
          var d = new Date();
          var s = d.toISOString();
          document.getElementById('calcday').value = s.slice(0,10);
          document.getElementById('calctime').value = s.slice(11,16);
        }
      };
      var makedate = function() {
        var ms = timediff(document.getElementById('calcday').value + ' ' + document.getElementById('calctime').value + ' -0000');
        var dt = splitdiff(ms);
        var ls = Object.keys(dt);
        for (var i = 0; i < ls.length; i++) {
          var k = ls[i];
          document.getElementById(k).innerHTML = dt[k];
        }
      };
    </script>
  </body>
</html>
