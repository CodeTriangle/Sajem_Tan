<html>
  <!--
Lorem Ipsum and random sentence generator for Sajem Tan
created by Daniel Swanson, all use permitted
Recommended use: download, open with webbrowser, click the buttons
  -->
  <head>
    <title>Sajem Tan lorem ipsum / random sentence generator</title>
  </head>
  <body>
    <p id="out"></p>
    <button onclick="disp(true);">Generate nonsense text</button>
    <button onclick="disp(false);">Generate random text</button>
    <script>
      var loremmap = {
        "para": [[" ", "sen", "para"], [" ", "sen"]],
        "sen": [[" ", "word", "sen"], ["", "word", "."]],
        "word": [["", "root", "word"], "root", ["", "word", "suf"]],
        "suf": [["", "consonant", "suf-vowel", "coda"], ["", "consonant", "suf-vowel"], ["", "suf-vowel"], ["", "suf-vowel", "coda"]],
        "root": [["", "syl", "root"], ["", "syl", "end"], "end"],
        "syl": [["", "consonant", "root-vowel"], ["", "cluster", "root-vowel"]],//["", "fricative", "nasal", "root-vowel"]],
        "cluster": ["fm", "fn", "vm", "vn", "sn", "zn", "shn", "zhn", "sln", "zln", "thn"],
        "fricative": ["f", "v", "s", "z", "sl", "zl", "sh", "zh", "th"],
        "nasal": ["m", "n"],
        "end": [["", "syl", "coda"]],
        "consonant": ["c", "t", "k", "m", "n", "f", "s", "zh", "zl", "x", "j", "th", "v", "z", "sh", "d", "g", "sl"],
        "coda": ["c", "t", "k", "m", "n"],
        "root-vowel": ["ol", "e", "el", "i", "a", "ul", "uh", "y"],
        "suf-vowel": ["o", "ah", "eh", "u"],
      };
      var senmap = {
        para: [["<br>", "sen", "para"], ["<br>", "sen"]],
        sen: [[" ", "VP", "NP"], [" ", "NP", "VP", "NP"], [" ", "VP", "NP", "obl"], [" ", "NP", "VP", "NP", "obl"]],
        VP: ["verb", [" ", "adv", "verb"]],
        verb: ["verb-aspect", ["", "verb-aspect", "valency"]],
        "verb-aspect": [["", "verb-no-inf", "aspect"]],
        "verb-no-inf": ["verb-root", ["", "adj", "adj>verb"]],
        NP: ["sNP", "pronoun", [" ", "NP", "conj", "NP"]],
        conj: ["keh"],
        sNP: [[" ", "adjP", "sNP"], "noun"],
        "adjP": ["adj", [" ", "adv", "adjP"]],
        adj: [["", "noun", "noun>adj"], "adj-root", "number"],
        number: ["tim", "dec", "fam", "vulc", "sluht", "zlik", "shen", "zhat", "kulk", "guhn", "znek", "thnolt", "vmelt",
                 "tyt", "dolk", "felt", "vyk", "slolc", "zlelc", "xek", "folt", "zhelt"],
        adv: ["adv-root"],
        pronoun: ["pronoun-root", ["", "pronoun", "noun>noun"]],
        "pronoun-root": ["seh", "theh", "thu", "vo", "vu", "zeh", "zhu", "zlo", "zo"],
        "plain-noun": [["", "verb-no-inf", "verb>noun"], ["", "plain-noun", "noun>noun"], "noun-root", ["", "noun-root", "plain-noun"]],
        noun: ["plain-noun", "pronoun", [" ", "shehn", "plain-noun", "om"], [" ", "tahn", "plain-noun", "om"]],
        //om added even when unconjugated - D.S. 02016-04-24
        "noun-root": ["cejym", "cuhc", "culjim", "din", "divolm", "duhdem", "femek", "fijyc", "gajin", "gamyk", "gigim", "gyn", "jafin", "jaxin", "jegen", "jidolk", "jikin", "jizlet", "kizhult", "kolthic", "kuhc", "kyfik", "mizizlat", "molm", "molmelc", "muhc", "nasham", "nyzlan", "sekelt", "shelsheln", "shnuhk", "shuhzhik", "slik", "slin", "slysyc", "snolzem", "snym", "sulfekahslifazhislitikesixahsloldolshyc", "sulslem", "tan", "telzlnoln", "tetan", "tezet", "thefam", "thefnolm", "thethat", "thneduht", "thnuhduhk", "tolmolm", "tuln", "tytyt", "vithit", "vmelfelc", "vmyn", "voljam", "xamatin", "xataxym", "xelteln", "xulkat", "zatenym", "zatheln", "zhasik", "zhetam", "zhiman", "zhizlik", "zhuhzhim", "zlislym", "zlnanic", "zlolfit", "zlolzhit", "zlulc", "znenan", "znolk", "zuhzuhmelt"],
        "adj-root": ["femek", "jelk", "met", "nymem", "sajem", "simem", "slik", "slnuhm", "solm", "suhzhnolm", "theln", "zlislym", "znim"],
        "adv-root": ["kic", "nacen", "slet", "sluln", "snat", "shan", "thec", "tholk", "voln"],
        "verb-root": ["cejym", "delgem", "doln", "fmyvuhk", "gulslim", "kem", "man", "muhshim", "nanym", "sesuht", "shasholc", "shelgin", "slin", "tan", "thek", "vaslnulm", "xanoln", "xaslem", "xaxat", "zamen", "zan", "zhuhzhuhm", "znolc"],
//        "verb-intrans": ["kem"], //impersonal/intransitives should be handled separately from normal transitives
//        "verb-impers": ["kem"], //not done for simplicity - D.S. 02016-02-15
        "noun>adj": ["meht"],
        "noun>noun": ["ah", "kah", "mon", "so", "zhum"],
        "verb>noun": ["noc"],
        "adj>verb": ["zhut"],
        "valency": ["sun"],
        aspect: ["da", "eht", "feh", "sho", "um"],
        "case": ["zheh", "thot", "gu", "vah", "kahm", "vmeh"],
        "obl-NP": [[" ", "adjP", "obl-NP"], ["", "noun", "case"], [" ", "noun", "post"]],
        "obl": [[" ", "obl-NP", "obl"], "obl-NP"],
        "aux": ["dic", "dec", "dac", "dulc",
                "golm", "gelm", "gym", "guht",
                "jit", "jet", "jat", "julc",
                "molt", "melt", "myt", "muht",
                "shik", "shek", "shak", "shulk"],
        "post": ["navnyc", "sholmak", "sno"]
      };
      var lorem = ["Sen", "VP", "Subj", "Obj"];
      var choose = function(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
      }
      var lasttree = [];
      var build = function(tree, lor) {
        var ret = ["tree", "path"];
        if (!tree) {
          ret[0] = "{mistake}";
          ret[1] = "{mistake}";
        } else if (tree.constructor === Array) {
          ret[0] = "";
          ret[1] = [];
          var r;
          for (var i = 1; i < tree.length; i++) {
            if (i !== 1) {
              ret[0] += tree[0];
            }
            r = build(tree[i], lor);
            ret[0] += r[0];
            ret[1].push(r[1]);
          }
        } else {
          var m;
          if (lor) {
            m = loremmap;
          } else {
            m = senmap;
          }
          if (m.hasOwnProperty(tree)) {
            var h = build(choose(m[tree]), lor);
            ret[0] = h[0];
            ret[1] = [tree].concat(h[1]);
          } else {
            ret = [tree, tree];
          }
        }
        return ret;
      }
      var disp = function(lor) {
        var l = build("para", lor);
        document.getElementById("out").innerHTML = l[0];
        lasttree = l[1];
      }
    </script>
  </body>
</html>
